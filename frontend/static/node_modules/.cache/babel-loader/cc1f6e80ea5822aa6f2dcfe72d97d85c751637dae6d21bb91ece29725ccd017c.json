{"ast":null,"code":"import _regeneratorRuntime from\"/Users/jake/Documents/CCS/hw/drf-react-newspaper-app/frontend/static/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/jake/Documents/CCS/hw/drf-react-newspaper-app/frontend/static/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/jake/Documents/CCS/hw/drf-react-newspaper-app/frontend/static/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from\"react\";import ArticleLink from\"./ArticleLink\";import{nanoid}from\"nanoid\";import\"./article-list.css\";import Cookies from\"js-cookie\";import{jsx as _jsx}from\"react/jsx-runtime\";var INITIAL_ARTICLES=[\"article 1\",\"article 2\",\"Funny comics\",\"dsytopia\"];function ArticleList(props){// Initial load of any posts\nvar _useState=useState(INITIAL_ARTICLES),_useState2=_slicedToArray(_useState,2),articles=_useState2[0],setArticles=_useState2[1];useEffect(function(){var getArticles=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var options,response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:options={method:\"GET\",headers:{\"Content-Type\":\"application/json\",\"X-CSRFToken\":Cookies.get(\"csrftoken\")}};// let category = \"\";\n// if (props.currCategory) category = props.currCategory;\n_context.next=3;return fetch(\"api_v1/posts/\".concat(props.currCategory),options);case 3:response=_context.sent;if(response.ok){_context.next=6;break;}throw new Error(\"unable to get articles based on category: \".concat(props.currCategory));case 6:_context.next=8;return response.json();case 8:data=_context.sent;console.log(\"new category data\",data);if(data.length>0){setArticles(data);}case 11:case\"end\":return _context.stop();}},_callee);}));return function getArticles(_x){return _ref.apply(this,arguments);};}();getArticles();},[props.currCategory]);useEffect(function(){var getArticles=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(e){var options,response,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:options={method:\"GET\",headers:{\"Content-Type\":\"application/json\",\"X-CSRF-Token\":Cookies.get(\"csrftoken\")}};_context2.next=3;return fetch(\"api_v1/posts/\",options);case 3:response=_context2.sent;if(response.ok){_context2.next=6;break;}throw new Error(\"unable to get articles based on category: \".concat(props.currCategory));case 6:_context2.next=8;return response.json();case 8:data=_context2.sent;console.log(\"initial articles data:\",data);setArticles(data);case 11:case\"end\":return _context2.stop();}},_callee2);}));return function getArticles(_x2){return _ref2.apply(this,arguments);};}();getArticles();},[]);var articlesHTML=articles.map(function(article){return/*#__PURE__*/_jsx(ArticleLink,{article:article,setNewArticle:props.setNewArticle},nanoid());});return/*#__PURE__*/_jsx(\"ul\",{className:\"link-list\",children:articlesHTML});}export default ArticleList;","map":{"version":3,"names":["useState","useEffect","ArticleLink","nanoid","Cookies","jsx","_jsx","INITIAL_ARTICLES","ArticleList","props","_useState","_useState2","_slicedToArray","articles","setArticles","getArticles","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","options","response","data","wrap","_callee$","_context","prev","next","method","headers","get","fetch","concat","currCategory","sent","ok","Error","json","console","log","length","stop","_x","apply","arguments","_ref2","_callee2","_callee2$","_context2","_x2","articlesHTML","map","article","setNewArticle","className","children"],"sources":["/Users/jake/Documents/CCS/hw/drf-react-newspaper-app/frontend/static/src/Components/Articles/ArticleList.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport ArticleLink from \"./ArticleLink\";\nimport { nanoid } from \"nanoid\";\nimport \"./article-list.css\";\nimport Cookies from \"js-cookie\";\n\nconst INITIAL_ARTICLES = [\"article 1\", \"article 2\", \"Funny comics\", \"dsytopia\"];\n\nfunction ArticleList(props) {\n\t// Initial load of any posts\n\tconst [articles, setArticles] = useState(INITIAL_ARTICLES);\n\tuseEffect(() => {\n\t\tconst getArticles = async (e) => {\n\t\t\tconst options = {\n\t\t\t\tmethod: \"GET\",\n\t\t\t\theaders: {\n\t\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t\t\"X-CSRFToken\": Cookies.get(\"csrftoken\"),\n\t\t\t\t},\n\t\t\t};\n\n\t\t\t// let category = \"\";\n\t\t\t// if (props.currCategory) category = props.currCategory;\n\n\t\t\tconst response = await fetch(\n\t\t\t\t`api_v1/posts/${props.currCategory}`,\n\t\t\t\toptions\n\t\t\t);\n\t\t\tif (!response.ok) {\n\t\t\t\tthrow new Error(\n\t\t\t\t\t`unable to get articles based on category: ${props.currCategory}`\n\t\t\t\t);\n\t\t\t}\n\t\t\tconst data = await response.json();\n\t\t\tconsole.log(\"new category data\", data);\n\t\t\tif (data.length > 0) {\n\t\t\t\tsetArticles(data);\n\t\t\t}\n\t\t};\n\t\tgetArticles();\n\t}, [props.currCategory]);\n\n\tuseEffect(() => {\n\t\tconst getArticles = async (e) => {\n\t\t\tconst options = {\n\t\t\t\tmethod: \"GET\",\n\t\t\t\theaders: {\n\t\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t\t\"X-CSRF-Token\": Cookies.get(\"csrftoken\"),\n\t\t\t\t},\n\t\t\t};\n\t\t\tconst response = await fetch(\"api_v1/posts/\", options);\n\t\t\tif (!response.ok) {\n\t\t\t\tthrow new Error(\n\t\t\t\t\t`unable to get articles based on category: ${props.currCategory}`\n\t\t\t\t);\n\t\t\t}\n\t\t\tconst data = await response.json();\n\t\t\tconsole.log(\"initial articles data:\", data);\n\t\t\tsetArticles(data);\n\t\t};\n\t\tgetArticles();\n\t}, []);\n\n\tconst articlesHTML = articles.map((article) => (\n\t\t<ArticleLink\n\t\t\tkey={nanoid()}\n\t\t\tarticle={article}\n\t\t\tsetNewArticle={props.setNewArticle}\n\t\t/>\n\t));\n\n\treturn <ul className=\"link-list\">{articlesHTML}</ul>;\n}\n\nexport default ArticleList;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}