{"ast":null,"code":"import _regeneratorRuntime from\"/Users/jake/Documents/CCS/hw/drf-react-newspaper-app/frontend/static/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/jake/Documents/CCS/hw/drf-react-newspaper-app/frontend/static/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/jake/Documents/CCS/hw/drf-react-newspaper-app/frontend/static/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from\"react\";import ArticleLink from\"./ArticleLink\";import{nanoid}from\"nanoid\";import\"./article-list.css\";import Cookies from\"js-cookie\";import{jsx as _jsx}from\"react/jsx-runtime\";var INITIAL_ARTICLES=[\"article 1\",\"article 2\",\"Funny comics\",\"dsytopia\"];function ArticleList(props){// useEffect(() => {\n// \tconst getArticles = async (e) => {\n// \t\tconst options = {\n// \t\t\tmethod: \"GET\",\n// \t\t\theaders: {\n// \t\t\t\t\"Content-Type\": \"application/json\",\n// \t\t\t},\n// \t\t};\n// \t\tconst response = await fetch(\n// \t\t\t`api_v1/posts/${props.currCategory}`,\n// \t\t\toptions\n// \t\t);\n// \t\tconst data = await response.json();\n// \t\tconsole.log(\"new category data\", data);\n// \t\tsetArticles(data);\n// \t};\n// \tgetArticles();\n// }, [props.currCategory]);\n// Initial load of any posts\nvar _useState=useState(INITIAL_ARTICLES),_useState2=_slicedToArray(_useState,2),articles=_useState2[0],setArticles=_useState2[1];useEffect(function(){var getArticles=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var options,response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:options={method:\"GET\",headers:{\"Content-Type\":\"application/json\",\"X-CSRF-Token\":Cookies.get(\"csrftoken\")}};_context.next=3;return fetch(\"/api_v1/posts/\",options);case 3:response=_context.sent;_context.next=6;return response.json();case 6:data=_context.sent;console.log(\"initial articles data:\",data);setArticles(data);case 9:case\"end\":return _context.stop();}},_callee);}));return function getArticles(_x){return _ref.apply(this,arguments);};}();getArticles();},[]);var articlesHTML=articles.map(function(article){return/*#__PURE__*/_jsx(ArticleLink,{article:article,setNewArticle:props.setNewArticle},nanoid());});return/*#__PURE__*/_jsx(\"ul\",{className:\"link-list\",children:articlesHTML});}export default ArticleList;","map":{"version":3,"names":["useState","useEffect","ArticleLink","nanoid","Cookies","jsx","_jsx","INITIAL_ARTICLES","ArticleList","props","_useState","_useState2","_slicedToArray","articles","setArticles","getArticles","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","options","response","data","wrap","_callee$","_context","prev","next","method","headers","get","fetch","sent","json","console","log","stop","_x","apply","arguments","articlesHTML","map","article","setNewArticle","className","children"],"sources":["/Users/jake/Documents/CCS/hw/drf-react-newspaper-app/frontend/static/src/Components/Articles/ArticleList.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport ArticleLink from \"./ArticleLink\";\nimport { nanoid } from \"nanoid\";\nimport \"./article-list.css\";\nimport Cookies from \"js-cookie\";\n\nconst INITIAL_ARTICLES = [\"article 1\", \"article 2\", \"Funny comics\", \"dsytopia\"];\n\nfunction ArticleList(props) {\n\t// useEffect(() => {\n\t// \tconst getArticles = async (e) => {\n\t// \t\tconst options = {\n\t// \t\t\tmethod: \"GET\",\n\t// \t\t\theaders: {\n\t// \t\t\t\t\"Content-Type\": \"application/json\",\n\t// \t\t\t},\n\t// \t\t};\n\n\t// \t\tconst response = await fetch(\n\t// \t\t\t`api_v1/posts/${props.currCategory}`,\n\t// \t\t\toptions\n\t// \t\t);\n\t// \t\tconst data = await response.json();\n\t// \t\tconsole.log(\"new category data\", data);\n\t// \t\tsetArticles(data);\n\t// \t};\n\t// \tgetArticles();\n\t// }, [props.currCategory]);\n\n\t// Initial load of any posts\n\tconst [articles, setArticles] = useState(INITIAL_ARTICLES);\n\tuseEffect(() => {\n\t\tconst getArticles = async (e) => {\n\t\t\tconst options = {\n\t\t\t\tmethod: \"GET\",\n\t\t\t\theaders: {\n\t\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t\t\"X-CSRF-Token\": Cookies.get(\"csrftoken\"),\n\t\t\t\t},\n\t\t\t};\n\t\t\tconst response = await fetch(\"/api_v1/posts/\", options);\n\t\t\tconst data = await response.json();\n\t\t\tconsole.log(\"initial articles data:\", data);\n\t\t\tsetArticles(data);\n\t\t};\n\t\tgetArticles();\n\t}, []);\n\n\tconst articlesHTML = articles.map((article) => (\n\t\t<ArticleLink\n\t\t\tkey={nanoid()}\n\t\t\tarticle={article}\n\t\t\tsetNewArticle={props.setNewArticle}\n\t\t/>\n\t));\n\n\treturn <ul className=\"link-list\">{articlesHTML}</ul>;\n}\n\nexport default ArticleList;\n"],"mappings":"8dAAA,OAASA,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC3C,MAAO,CAAAC,WAAW,KAAM,eAAe,CACvC,OAASC,MAAM,KAAQ,QAAQ,CAC/B,MAAO,oBAAoB,CAC3B,MAAO,CAAAC,OAAO,KAAM,WAAW,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAEhC,GAAM,CAAAC,gBAAgB,CAAG,CAAC,WAAW,CAAE,WAAW,CAAE,cAAc,CAAE,UAAU,CAAC,CAE/E,QAAS,CAAAC,WAAWA,CAACC,KAAK,CAAE,CAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA,IAAAC,SAAA,CAAgCV,QAAQ,CAACO,gBAAgB,CAAC,CAAAI,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAAnDG,QAAQ,CAAAF,UAAA,IAAEG,WAAW,CAAAH,UAAA,IAC5BV,SAAS,CAAC,UAAM,CACf,GAAM,CAAAc,WAAW,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAOC,CAAC,MAAAC,OAAA,CAAAC,QAAA,CAAAC,IAAA,QAAAN,mBAAA,GAAAO,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SACrBP,OAAO,CAAG,CACfQ,MAAM,CAAE,KAAK,CACbC,OAAO,CAAE,CACR,cAAc,CAAE,kBAAkB,CAClC,cAAc,CAAE3B,OAAO,CAAC4B,GAAG,CAAC,WAAW,CACxC,CACD,CAAC,CAAAL,QAAA,CAAAE,IAAA,SACsB,CAAAI,KAAK,CAAC,gBAAgB,CAAEX,OAAO,CAAC,QAAjDC,QAAQ,CAAAI,QAAA,CAAAO,IAAA,CAAAP,QAAA,CAAAE,IAAA,SACK,CAAAN,QAAQ,CAACY,IAAI,EAAE,QAA5BX,IAAI,CAAAG,QAAA,CAAAO,IAAA,CACVE,OAAO,CAACC,GAAG,CAAC,wBAAwB,CAAEb,IAAI,CAAC,CAC3CV,WAAW,CAACU,IAAI,CAAC,CAAC,wBAAAG,QAAA,CAAAW,IAAA,MAAAlB,OAAA,GAClB,kBAZK,CAAAL,WAAWA,CAAAwB,EAAA,SAAAvB,IAAA,CAAAwB,KAAA,MAAAC,SAAA,OAYhB,CACD1B,WAAW,EAAE,CACd,CAAC,CAAE,EAAE,CAAC,CAEN,GAAM,CAAA2B,YAAY,CAAG7B,QAAQ,CAAC8B,GAAG,CAAC,SAACC,OAAO,qBACzCtC,IAAA,CAACJ,WAAW,EAEX0C,OAAO,CAAEA,OAAQ,CACjBC,aAAa,CAAEpC,KAAK,CAACoC,aAAc,EAF9B1C,MAAM,EAAE,CAGZ,EACF,CAAC,CAEF,mBAAOG,IAAA,OAAIwC,SAAS,CAAC,WAAW,CAAAC,QAAA,CAAEL,YAAY,EAAM,CACrD,CAEA,cAAe,CAAAlC,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}