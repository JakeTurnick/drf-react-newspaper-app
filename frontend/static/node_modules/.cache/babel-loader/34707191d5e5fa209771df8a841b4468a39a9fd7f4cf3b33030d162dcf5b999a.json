{"ast":null,"code":"import _slicedToArray from\"/Users/jake/Documents/CCS/hw/drf-react-newspaper-app/frontend/static/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/jake/Documents/CCS/hw/drf-react-newspaper-app/frontend/static/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/jake/Documents/CCS/hw/drf-react-newspaper-app/frontend/static/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{useState,useEffect}from\"react\";import ArticleLink from\"./ArticleLink\";import{nanoid}from\"nanoid\";import\"./article-list.css\";import Cookies from\"js-cookie\";import{jsx as _jsx}from\"react/jsx-runtime\";var INITIAL_ARTICLES=[\"article 1\",\"article 2\",\"Funny comics\",\"dsytopia\"];function ArticleList(props){useEffect(function(){var getArticles=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var options,response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:options={method:\"GET\",headers:{\"Content-Type\":\"application/json\",\"X-CSRFToken\":Cookies.get(\"csrftoken\")}};if(!props.currCategory){_context.next=7;break;}_context.next=4;return fetch(\"api_v1/posts/\".concat(props.currCategory),options);case 4:response=_context.sent;_context.next=10;break;case 7:_context.next=9;return fetch(\"api_v1/posts/\",options);case 9:response=_context.sent;case 10:_context.next=12;return response.json();case 12:data=_context.sent;console.log(\"new category data\",data);if(data){setArticles(data);}case 15:case\"end\":return _context.stop();}},_callee);}));return function getArticles(_x){return _ref.apply(this,arguments);};}();getArticles();},[props.currCategory]);// Initial load of any posts\nvar _useState=useState(INITIAL_ARTICLES),_useState2=_slicedToArray(_useState,2),articles=_useState2[0],setArticles=_useState2[1];useEffect(function(){var getArticles=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(e){var options,response,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:options={method:\"GET\",headers:{\"Content-Type\":\"application/json\",\"X-CSRF-Token\":Cookies.get(\"csrftoken\")}};_context2.next=3;return fetch(\"api_v1/posts/\",options);case 3:response=_context2.sent;_context2.next=6;return response.json();case 6:data=_context2.sent;console.log(\"initial articles data:\",data);setArticles(data);case 9:case\"end\":return _context2.stop();}},_callee2);}));return function getArticles(_x2){return _ref2.apply(this,arguments);};}();getArticles();},[]);var articlesHTML=articles.map(function(article){return/*#__PURE__*/_jsx(ArticleLink,{article:article,setNewArticle:props.setNewArticle},nanoid());});return/*#__PURE__*/_jsx(\"ul\",{className:\"link-list\",children:articlesHTML});}export default ArticleList;","map":{"version":3,"names":["useState","useEffect","ArticleLink","nanoid","Cookies","jsx","_jsx","INITIAL_ARTICLES","ArticleList","props","getArticles","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","options","response","data","wrap","_callee$","_context","prev","next","method","headers","get","currCategory","fetch","concat","sent","json","console","log","setArticles","stop","_x","apply","arguments","_useState","_useState2","_slicedToArray","articles","_ref2","_callee2","_callee2$","_context2","_x2","articlesHTML","map","article","setNewArticle","className","children"],"sources":["/Users/jake/Documents/CCS/hw/drf-react-newspaper-app/frontend/static/src/Components/Articles/ArticleList.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport ArticleLink from \"./ArticleLink\";\nimport { nanoid } from \"nanoid\";\nimport \"./article-list.css\";\nimport Cookies from \"js-cookie\";\n\nconst INITIAL_ARTICLES = [\"article 1\", \"article 2\", \"Funny comics\", \"dsytopia\"];\n\nfunction ArticleList(props) {\n\tuseEffect(() => {\n\t\tconst getArticles = async (e) => {\n\t\t\tconst options = {\n\t\t\t\tmethod: \"GET\",\n\t\t\t\theaders: {\n\t\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t\t\"X-CSRFToken\": Cookies.get(\"csrftoken\"),\n\t\t\t\t},\n\t\t\t};\n\t\t\tlet response;\n\t\t\tif (props.currCategory) {\n\t\t\t\tresponse = await fetch(`api_v1/posts/${props.currCategory}`, options);\n\t\t\t} else {\n\t\t\t\tresponse = await fetch(\"api_v1/posts/\", options);\n\t\t\t}\n\n\t\t\tconst data = await response.json();\n\t\t\tconsole.log(\"new category data\", data);\n\t\t\tif (data) {\n\t\t\t\tsetArticles(data);\n\t\t\t}\n\t\t};\n\t\tgetArticles();\n\t}, [props.currCategory]);\n\n\t// Initial load of any posts\n\tconst [articles, setArticles] = useState(INITIAL_ARTICLES);\n\tuseEffect(() => {\n\t\tconst getArticles = async (e) => {\n\t\t\tconst options = {\n\t\t\t\tmethod: \"GET\",\n\t\t\t\theaders: {\n\t\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t\t\"X-CSRF-Token\": Cookies.get(\"csrftoken\"),\n\t\t\t\t},\n\t\t\t};\n\t\t\tconst response = await fetch(\"api_v1/posts/\", options);\n\t\t\tconst data = await response.json();\n\t\t\tconsole.log(\"initial articles data:\", data);\n\t\t\tsetArticles(data);\n\t\t};\n\t\tgetArticles();\n\t}, []);\n\n\tconst articlesHTML = articles.map((article) => (\n\t\t<ArticleLink\n\t\t\tkey={nanoid()}\n\t\t\tarticle={article}\n\t\t\tsetNewArticle={props.setNewArticle}\n\t\t/>\n\t));\n\n\treturn <ul className=\"link-list\">{articlesHTML}</ul>;\n}\n\nexport default ArticleList;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}