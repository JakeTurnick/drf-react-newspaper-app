{"ast":null,"code":"var _jsxFileName = \"/Users/jake/Documents/CCS/hw/drf-react-newspaper-app/frontend/static/src/Components/Articles/ArticleList.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport ArticleLink from \"./ArticleLink\";\nimport { nanoid } from \"nanoid\";\nimport \"./article-list.css\";\nimport Cookies from \"js-cookie\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst INITIAL_ARTICLES = [\"article 1\", \"article 2\", \"Funny comics\", \"dsytopia\"];\nfunction ArticleList(props) {\n  _s();\n  // Initial load of any posts\n  const [articles, setArticles] = useState(INITIAL_ARTICLES);\n  useEffect(() => {\n    const getArticles = async e => {\n      const options = {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"X-CSRFToken\": Cookies.get(\"csrftoken\")\n        }\n      };\n\n      // let category = \"\";\n      // if (props.currCategory) category = props.currCategory;\n\n      const response = await fetch(`api_v1/posts/${props.currCategory}`, options);\n      if (!response.ok) {\n        throw new Error(`unable to get articles based on category: ${props.currCategory}`);\n      }\n      const data = await response.json();\n      console.log(\"new category data\", data);\n      if (data.length > 0) {\n        setArticles(data);\n      }\n    };\n    getArticles();\n  }, [props.currCategory]);\n  useEffect(() => {\n    const getArticles = async e => {\n      const options = {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"X-CSRF-Token\": Cookies.get(\"csrftoken\")\n        }\n      };\n      const response = await fetch(\"api_v1/posts/\", options);\n      if (!response.ok) {\n        throw new Error(`unable to get articles based on category: ${props.currCategory}`);\n      }\n      const data = await response.json();\n      console.log(\"initial articles data:\", data);\n      setArticles(data);\n    };\n    getArticles();\n  }, []);\n  const articlesHTML = articles.map(article => /*#__PURE__*/_jsxDEV(ArticleLink, {\n    article: article,\n    setNewArticle: props.setNewArticle\n  }, nanoid(), false, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 3\n  }, this));\n  return /*#__PURE__*/_jsxDEV(\"ul\", {\n    className: \"link-list\",\n    children: articlesHTML\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 9\n  }, this);\n}\n_s(ArticleList, \"84e8lXLtQ8ZqLf3x9ASP9ZOb2d0=\");\n_c = ArticleList;\nexport default ArticleList;\nvar _c;\n$RefreshReg$(_c, \"ArticleList\");","map":{"version":3,"names":["useState","useEffect","ArticleLink","nanoid","Cookies","jsxDEV","_jsxDEV","INITIAL_ARTICLES","ArticleList","props","_s","articles","setArticles","getArticles","e","options","method","headers","get","response","fetch","currCategory","ok","Error","data","json","console","log","length","articlesHTML","map","article","setNewArticle","fileName","_jsxFileName","lineNumber","columnNumber","className","children","_c","$RefreshReg$"],"sources":["/Users/jake/Documents/CCS/hw/drf-react-newspaper-app/frontend/static/src/Components/Articles/ArticleList.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport ArticleLink from \"./ArticleLink\";\nimport { nanoid } from \"nanoid\";\nimport \"./article-list.css\";\nimport Cookies from \"js-cookie\";\n\nconst INITIAL_ARTICLES = [\"article 1\", \"article 2\", \"Funny comics\", \"dsytopia\"];\n\nfunction ArticleList(props) {\n\t// Initial load of any posts\n\tconst [articles, setArticles] = useState(INITIAL_ARTICLES);\n\tuseEffect(() => {\n\t\tconst getArticles = async (e) => {\n\t\t\tconst options = {\n\t\t\t\tmethod: \"GET\",\n\t\t\t\theaders: {\n\t\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t\t\"X-CSRFToken\": Cookies.get(\"csrftoken\"),\n\t\t\t\t},\n\t\t\t};\n\n\t\t\t// let category = \"\";\n\t\t\t// if (props.currCategory) category = props.currCategory;\n\n\t\t\tconst response = await fetch(\n\t\t\t\t`api_v1/posts/${props.currCategory}`,\n\t\t\t\toptions\n\t\t\t);\n\t\t\tif (!response.ok) {\n\t\t\t\tthrow new Error(\n\t\t\t\t\t`unable to get articles based on category: ${props.currCategory}`\n\t\t\t\t);\n\t\t\t}\n\t\t\tconst data = await response.json();\n\t\t\tconsole.log(\"new category data\", data);\n\t\t\tif (data.length > 0) {\n\t\t\t\tsetArticles(data);\n\t\t\t}\n\t\t};\n\t\tgetArticles();\n\t}, [props.currCategory]);\n\n\tuseEffect(() => {\n\t\tconst getArticles = async (e) => {\n\t\t\tconst options = {\n\t\t\t\tmethod: \"GET\",\n\t\t\t\theaders: {\n\t\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t\t\"X-CSRF-Token\": Cookies.get(\"csrftoken\"),\n\t\t\t\t},\n\t\t\t};\n\t\t\tconst response = await fetch(\"api_v1/posts/\", options);\n\t\t\tif (!response.ok) {\n\t\t\t\tthrow new Error(\n\t\t\t\t\t`unable to get articles based on category: ${props.currCategory}`\n\t\t\t\t);\n\t\t\t}\n\t\t\tconst data = await response.json();\n\t\t\tconsole.log(\"initial articles data:\", data);\n\t\t\tsetArticles(data);\n\t\t};\n\t\tgetArticles();\n\t}, []);\n\n\tconst articlesHTML = articles.map((article) => (\n\t\t<ArticleLink\n\t\t\tkey={nanoid()}\n\t\t\tarticle={article}\n\t\t\tsetNewArticle={props.setNewArticle}\n\t\t/>\n\t));\n\n\treturn <ul className=\"link-list\">{articlesHTML}</ul>;\n}\n\nexport default ArticleList;\n"],"mappings":";;AAAA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,OAAOC,WAAW,MAAM,eAAe;AACvC,SAASC,MAAM,QAAQ,QAAQ;AAC/B,OAAO,oBAAoB;AAC3B,OAAOC,OAAO,MAAM,WAAW;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEhC,MAAMC,gBAAgB,GAAG,CAAC,WAAW,EAAE,WAAW,EAAE,cAAc,EAAE,UAAU,CAAC;AAE/E,SAASC,WAAWA,CAACC,KAAK,EAAE;EAAAC,EAAA;EAC3B;EACA,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGZ,QAAQ,CAACO,gBAAgB,CAAC;EAC1DN,SAAS,CAAC,MAAM;IACf,MAAMY,WAAW,GAAG,MAAOC,CAAC,IAAK;MAChC,MAAMC,OAAO,GAAG;QACfC,MAAM,EAAE,KAAK;QACbC,OAAO,EAAE;UACR,cAAc,EAAE,kBAAkB;UAClC,aAAa,EAAEb,OAAO,CAACc,GAAG,CAAC,WAAW;QACvC;MACD,CAAC;;MAED;MACA;;MAEA,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAC1B,gBAAeX,KAAK,CAACY,YAAa,EAAC,EACpCN,OAAO,CACP;MACD,IAAI,CAACI,QAAQ,CAACG,EAAE,EAAE;QACjB,MAAM,IAAIC,KAAK,CACb,6CAA4Cd,KAAK,CAACY,YAAa,EAAC,CACjE;MACF;MACA,MAAMG,IAAI,GAAG,MAAML,QAAQ,CAACM,IAAI,EAAE;MAClCC,OAAO,CAACC,GAAG,CAAC,mBAAmB,EAAEH,IAAI,CAAC;MACtC,IAAIA,IAAI,CAACI,MAAM,GAAG,CAAC,EAAE;QACpBhB,WAAW,CAACY,IAAI,CAAC;MAClB;IACD,CAAC;IACDX,WAAW,EAAE;EACd,CAAC,EAAE,CAACJ,KAAK,CAACY,YAAY,CAAC,CAAC;EAExBpB,SAAS,CAAC,MAAM;IACf,MAAMY,WAAW,GAAG,MAAOC,CAAC,IAAK;MAChC,MAAMC,OAAO,GAAG;QACfC,MAAM,EAAE,KAAK;QACbC,OAAO,EAAE;UACR,cAAc,EAAE,kBAAkB;UAClC,cAAc,EAAEb,OAAO,CAACc,GAAG,CAAC,WAAW;QACxC;MACD,CAAC;MACD,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,eAAe,EAAEL,OAAO,CAAC;MACtD,IAAI,CAACI,QAAQ,CAACG,EAAE,EAAE;QACjB,MAAM,IAAIC,KAAK,CACb,6CAA4Cd,KAAK,CAACY,YAAa,EAAC,CACjE;MACF;MACA,MAAMG,IAAI,GAAG,MAAML,QAAQ,CAACM,IAAI,EAAE;MAClCC,OAAO,CAACC,GAAG,CAAC,wBAAwB,EAAEH,IAAI,CAAC;MAC3CZ,WAAW,CAACY,IAAI,CAAC;IAClB,CAAC;IACDX,WAAW,EAAE;EACd,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMgB,YAAY,GAAGlB,QAAQ,CAACmB,GAAG,CAAEC,OAAO,iBACzCzB,OAAA,CAACJ,WAAW;IAEX6B,OAAO,EAAEA,OAAQ;IACjBC,aAAa,EAAEvB,KAAK,CAACuB;EAAc,GAF9B7B,MAAM,EAAE;IAAA8B,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,QAId,CAAC;EAEF,oBAAO9B,OAAA;IAAI+B,SAAS,EAAC,WAAW;IAAAC,QAAA,EAAET;EAAY;IAAAI,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,QAAM;AACrD;AAAC1B,EAAA,CAjEQF,WAAW;AAAA+B,EAAA,GAAX/B,WAAW;AAmEpB,eAAeA,WAAW;AAAC,IAAA+B,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}